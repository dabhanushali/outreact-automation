<%
let content = `
<div class="container-fluid py-4">
  <div class="row mb-4">
    <div class="col-12">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/blog-prospects">Blog Prospects</a></li>
          <li class="breadcrumb-item active">${prospect ? 'Edit Blog Prospect' : 'Add Blog Prospect'}</li>
        </ol>
      </nav>
      <h1><i class="bi bi-journal-richtext"></i> ${prospect ? 'Edit Blog Prospect' : 'Add New Blog Prospect'}</h1>
    </div>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <i class="bi bi-info-circle"></i> Blog Prospect Information
        </div>
        <div class="card-body">
          <form method="POST" action="${prospect ? `/blog-prospects/${prospect.id}/update` : '/blog-prospects/new'}">
            <div class="mb-3">
              <label for="domain" class="form-label">Domain *</label>
              <input type="text" class="form-control" id="domain" name="domain"
                     value="${prospect?.domain || ''}" ${prospect ? 'readonly' : 'required'}>
              <div class="form-text">Example: blog.example.com (without https://)</div>
            </div>

            <div class="mb-3">
              <label for="blog_name" class="form-label">Blog Name</label>
              <input type="text" class="form-control" id="blog_name" name="blog_name"
                     value="${prospect?.blog_name || ''}"
                     placeholder="My Awesome Blog">
            </div>

            <div class="mb-3">
              <label for="website_url" class="form-label">Website/Blog URL</label>
              <input type="url" class="form-control" id="website_url" name="website_url"
                     value="${prospect?.website_url || ''}"
                     placeholder="https://">
            </div>

            ${!prospect ? `
            <div class="mb-3">
              <label for="campaign_id" class="form-label">Add to Campaign (Optional)</label>
              <select class="form-select" id="campaign_id" name="campaign_id">
                <option value="">-- Select Campaign --</option>
                ${campaigns.map(c => `
                  <option value="${c.id}">${c.name}</option>
                `).join('')}
              </select>
              <div class="form-text">If selected, this blog prospect will be added to the chosen campaign as a lead.</div>
            </div>
            ` : ''}

            <div class="d-flex gap-2">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-save"></i> ${prospect ? 'Update Blog Prospect' : 'Create Blog Prospect'}
              </button>
              <a href="${prospect ? `/blog-prospects/${prospect.id}` : '/blog-prospects'}" class="btn btn-secondary">
                <i class="bi bi-x-lg"></i> Cancel
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card">
        <div class="card-header">
          <i class="bi bi-lightbulb"></i> Tips
        </div>
        <div class="card-body">
          <ul class="mb-0">
            <li>Domain is required and must be unique</li>
            <li>Enter domain without https:// or www.</li>
            <li>You can add prospects to this blog prospect after creation</li>
            ${!prospect ? '<li>Optionally add to a campaign to create a lead for outreach</li>' : ''}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
`;
%>
<%- include('../layout', { title: (prospect ? 'Edit Blog Prospect' : 'Add Blog Prospect') + ' - Outreach Admin', activePage: 'prospects', content: content, user: user }) %>
